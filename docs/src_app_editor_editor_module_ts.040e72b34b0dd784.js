"use strict";(self.webpackChunkang2_conduit=self.webpackChunkang2_conduit||[]).push([["src_app_editor_editor_module_ts"],{3060:(E,u,s)=>{s.r(u),s.d(u,{EditorModule:()=>b});var d=s(1994),n=s(8871),a=s(4341),c=s(7547),t=s(4438),p=s(177),h=s(5255);function f(e,C){if(1&e){const r=t.RV6();t.j41(0,"span",15)(1,"i",16),t.bIt("click",function(){const o=t.eBV(r).$implicit,l=t.XpG();return t.Njj(l.removeTag(o))}),t.k0s(),t.EFF(2),t.k0s()}if(2&e){const r=C.$implicit;t.R7$(2),t.SpI(" ",r," ")}}let m=(()=>{class e{articlesService;route;router;fb;cd;article={};articleForm;tagField=new a.MJ;errors={};isSubmitting=!1;constructor(r,i,o,l,j){this.articlesService=r,this.route=i,this.router=o,this.fb=l,this.cd=j,this.articleForm=this.fb.group({title:"",description:"",body:""}),this.article.tagList=[]}ngOnInit(){this.route.data.subscribe(r=>{r.article&&(this.article=r.article,this.articleForm.patchValue(r.article),this.cd.markForCheck())})}trackByFn(r,i){return r}addTag(){const r=this.tagField.value;this.article.tagList.indexOf(r)<0&&this.article.tagList.push(r),this.tagField.reset("")}removeTag(r){this.article.tagList=this.article.tagList.filter(i=>i!==r)}submitForm(){this.isSubmitting=!0,this.updateArticle(this.articleForm.value),this.articlesService.save(this.article).subscribe(r=>{this.router.navigateByUrl("/article/"+r.slug),this.cd.markForCheck()},r=>{this.errors=r,this.isSubmitting=!1,this.cd.markForCheck()})}updateArticle(r){Object.assign(this.article,r)}static \u0275fac=function(i){return new(i||e)(t.rXU(c.Nu),t.rXU(n.nX),t.rXU(n.Ix),t.rXU(a.ok),t.rXU(t.gRc))};static \u0275cmp=t.VBU({type:e,selectors:[["app-editor-page"]],decls:20,vars:6,consts:[[1,"editor-page"],[1,"container","page"],[1,"row"],[1,"col-md-10","offset-md-1","col-xs-12"],[3,"errors"],[3,"formGroup"],[3,"disabled"],[1,"form-group"],["formControlName","title","type","text","placeholder","Article Title",1,"form-control","form-control-lg"],["formControlName","description","type","text","placeholder","What's this article about?",1,"form-control"],["formControlName","body","rows","8","placeholder","Write your article (in markdown)",1,"form-control"],["type","text","placeholder","Enter tags",1,"form-control",3,"keyup.enter","formControl"],[1,"tag-list"],["class","tag-default tag-pill",4,"ngFor","ngForOf","ngForTrackBy"],["type","button",1,"btn","btn-lg","pull-xs-right","btn-primary",3,"click"],[1,"tag-default","tag-pill"],[1,"ion-close-round",3,"click"]],template:function(i,o){1&i&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t.nrm(4,"app-list-errors",4),t.j41(5,"form",5)(6,"fieldset",6)(7,"fieldset",7),t.nrm(8,"input",8),t.k0s(),t.j41(9,"fieldset",7),t.nrm(10,"input",9),t.k0s(),t.j41(11,"fieldset",7)(12,"textarea",10),t.EFF(13,"              "),t.k0s()(),t.j41(14,"fieldset",7)(15,"input",11),t.bIt("keyup.enter",function(){return o.addTag()}),t.k0s(),t.j41(16,"div",12),t.DNE(17,f,3,1,"span",13),t.k0s()(),t.j41(18,"button",14),t.bIt("click",function(){return o.submitForm()}),t.EFF(19," Publish Article "),t.k0s()()()()()()()),2&i&&(t.R7$(4),t.Y8G("errors",o.errors),t.R7$(),t.Y8G("formGroup",o.articleForm),t.R7$(),t.Y8G("disabled",o.isSubmitting),t.R7$(9),t.Y8G("formControl",o.tagField),t.R7$(2),t.Y8G("ngForOf",o.article.tagList)("ngForTrackBy",o.trackByFn))},dependencies:[p.Sq,a.qT,a.me,a.BC,a.cb,a.l_,a.j4,a.JD,h.Z],encapsulation:2,changeDetection:0})}return e})();var g=s(6354),v=s(9437);const y=[{path:"",component:m,canActivate:[c.q_]},{path:":slug",component:m,canActivate:[c.q_],resolve:{article:(()=>{class e{articlesService;router;userService;constructor(r,i,o){this.articlesService=r,this.router=i,this.userService=o}resolve(r,i){return this.articlesService.get(r.params.slug).pipe((0,g.T)(o=>{if(this.userService.getCurrentUser().username===o.author.username)return o;this.router.navigateByUrl("/")}),(0,v.W)(o=>this.router.navigateByUrl("/")))}static \u0275fac=function(i){return new(i||e)(t.KVO(c.Nu),t.KVO(n.Ix),t.KVO(c.DL))};static \u0275prov=t.jDH({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})()}}];let k=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=t.$C({type:e});static \u0275inj=t.G2t({imports:[n.iI.forChild(y),n.iI]})}return e})(),b=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=t.$C({type:e});static \u0275inj=t.G2t({imports:[d.Gg,k]})}return e})()}}]);