"use strict";(self.webpackChunkang2_conduit=self.webpackChunkang2_conduit||[]).push([["src_app_editor_editor_module_ts"],{8745:(A,p,s)=>{s.r(p),s.d(p,{EditorModule:()=>T});var i=s(1180),g=s(1404),c=s(6775),l=s(5030),u=s(7543),t=s(9523),f=s(4755),v=s(6860);function Z(r,n){if(1&r){const e=t.EpF();t.TgZ(0,"span",15)(1,"i",16),t.NdJ("click",function(){const d=t.CHM(e).$implicit,m=t.oxw();return t.KtG(m.removeTag(d))}),t.qZA(),t._uU(2),t.qZA()}if(2&r){const e=n.$implicit;t.xp6(2),t.hij(" ",e," ")}}let h=(()=>{class r{constructor(e,o,a,d,m){(0,i.Z)(this,"articlesService",void 0),(0,i.Z)(this,"route",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"fb",void 0),(0,i.Z)(this,"cd",void 0),(0,i.Z)(this,"article",{}),(0,i.Z)(this,"articleForm",void 0),(0,i.Z)(this,"tagField",new l.NI),(0,i.Z)(this,"errors",{}),(0,i.Z)(this,"isSubmitting",!1),this.articlesService=e,this.route=o,this.router=a,this.fb=d,this.cd=m,this.articleForm=this.fb.group({title:"",description:"",body:""}),this.article.tagList=[]}ngOnInit(){this.route.data.subscribe(e=>{e.article&&(this.article=e.article,this.articleForm.patchValue(e.article),this.cd.markForCheck())})}trackByFn(e,o){return e}addTag(){const e=this.tagField.value;this.article.tagList.indexOf(e)<0&&this.article.tagList.push(e),this.tagField.reset("")}removeTag(e){this.article.tagList=this.article.tagList.filter(o=>o!==e)}submitForm(){this.isSubmitting=!0,this.updateArticle(this.articleForm.value),this.articlesService.save(this.article).subscribe(e=>{this.router.navigateByUrl("/article/"+e.slug),this.cd.markForCheck()},e=>{this.errors=e,this.isSubmitting=!1,this.cd.markForCheck()})}updateArticle(e){Object.assign(this.article,e)}}return(0,i.Z)(r,"\u0275fac",function(e){return new(e||r)(t.Y36(u.JU),t.Y36(c.gz),t.Y36(c.F0),t.Y36(l.qu),t.Y36(t.sBO))}),(0,i.Z)(r,"\u0275cmp",t.Xpm({type:r,selectors:[["app-editor-page"]],decls:20,vars:6,consts:[[1,"editor-page"],[1,"container","page"],[1,"row"],[1,"col-md-10","offset-md-1","col-xs-12"],[3,"errors"],[3,"formGroup"],[3,"disabled"],[1,"form-group"],["formControlName","title","type","text","placeholder","Article Title",1,"form-control","form-control-lg"],["formControlName","description","type","text","placeholder","What's this article about?",1,"form-control"],["formControlName","body","rows","8","placeholder","Write your article (in markdown)",1,"form-control"],["type","text","placeholder","Enter tags",1,"form-control",3,"formControl","keyup.enter"],[1,"tag-list"],["class","tag-default tag-pill",4,"ngFor","ngForOf","ngForTrackBy"],["type","button",1,"btn","btn-lg","pull-xs-right","btn-primary",3,"click"],[1,"tag-default","tag-pill"],[1,"ion-close-round",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t._UZ(4,"app-list-errors",4),t.TgZ(5,"form",5)(6,"fieldset",6)(7,"fieldset",7),t._UZ(8,"input",8),t.qZA(),t.TgZ(9,"fieldset",7),t._UZ(10,"input",9),t.qZA(),t.TgZ(11,"fieldset",7)(12,"textarea",10),t._uU(13,"              "),t.qZA()(),t.TgZ(14,"fieldset",7)(15,"input",11),t.NdJ("keyup.enter",function(){return o.addTag()}),t.qZA(),t.TgZ(16,"div",12),t.YNc(17,Z,3,1,"span",13),t.qZA()(),t.TgZ(18,"button",14),t.NdJ("click",function(){return o.submitForm()}),t._uU(19," Publish Article "),t.qZA()()()()()()()),2&e&&(t.xp6(4),t.Q6J("errors",o.errors),t.xp6(1),t.Q6J("formGroup",o.articleForm),t.xp6(1),t.Q6J("disabled",o.isSubmitting),t.xp6(9),t.Q6J("formControl",o.tagField),t.xp6(2),t.Q6J("ngForOf",o.article.tagList)("ngForTrackBy",o.trackByFn))},dependencies:[f.sg,l._Y,l.Fj,l.JJ,l.JL,l.oH,l.sg,l.u,v.S],encapsulation:2,changeDetection:0})),r})();var F=s(4004),y=s(262);const E=[{path:"",component:h,canActivate:[u.a1]},{path:":slug",component:h,canActivate:[u.a1],resolve:{article:(()=>{class r{constructor(e,o,a){(0,i.Z)(this,"articlesService",void 0),(0,i.Z)(this,"router",void 0),(0,i.Z)(this,"userService",void 0),this.articlesService=e,this.router=o,this.userService=a}resolve(e,o){return this.articlesService.get(e.params.slug).pipe((0,F.U)(a=>{if(this.userService.getCurrentUser().username===a.author.username)return a;this.router.navigateByUrl("/")}),(0,y.K)(a=>this.router.navigateByUrl("/")))}}return(0,i.Z)(r,"\u0275fac",function(e){return new(e||r)(t.LFG(u.JU),t.LFG(c.F0),t.LFG(u.KD))}),(0,i.Z)(r,"\u0275prov",t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})),r})()}}];let b=(()=>{class r{}return(0,i.Z)(r,"\u0275fac",function(e){return new(e||r)}),(0,i.Z)(r,"\u0275mod",t.oAB({type:r})),(0,i.Z)(r,"\u0275inj",t.cJS({imports:[c.Bz.forChild(E),c.Bz]})),r})(),T=(()=>{class r{}return(0,i.Z)(r,"\u0275fac",function(e){return new(e||r)}),(0,i.Z)(r,"\u0275mod",t.oAB({type:r})),(0,i.Z)(r,"\u0275inj",t.cJS({imports:[g.m8,b]})),r})()}}]);