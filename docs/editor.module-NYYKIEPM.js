import{A as a,Aa as U,B as c,Ba as V,C as A,Ca as G,D as u,Da as W,Ea as $,F as N,Fa as P,Ga as q,I as s,J as o,K as n,L as d,La as z,M as I,N as f,O as R,P as g,R as T,X as w,Z as x,da as h,f as b,fa as M,ha as v,i as E,la as y,ma as B,n as k,na as F,o as m,q as p,t as _,u as j,va as D,xa as L,ya as O}from"./chunk-52BIPFCO.js";function Z(e,K){if(e&1){let t=I();o(0,"span",15)(1,"i",16),f("click",function(){let r=_(t).$implicit,l=R();return j(l.removeTag(r))}),n(),g(2),n()}if(e&2){let t=K.$implicit;a(2),T(" ",t," ")}}var S=(()=>{class e{articlesService;route;router;fb;cd;article={};articleForm;tagField=new U;errors={};isSubmitting=!1;constructor(t,i,r,l,Q){this.articlesService=t,this.route=i,this.router=r,this.fb=l,this.cd=Q,this.articleForm=this.fb.group({title:"",description:"",body:""}),this.article.tagList=[]}ngOnInit(){this.route.data.subscribe(t=>{t.article&&(this.article=t.article,this.articleForm.patchValue(t.article),this.cd.markForCheck())})}trackByFn(t,i){return t}addTag(){let t=this.tagField.value;this.article.tagList.indexOf(t)<0&&this.article.tagList.push(t),this.tagField.reset("")}removeTag(t){this.article.tagList=this.article.tagList.filter(i=>i!==t)}submitForm(){this.isSubmitting=!0,this.updateArticle(this.articleForm.value),this.articlesService.save(this.article).subscribe(t=>{this.router.navigateByUrl("/article/"+t.slug),this.cd.markForCheck()},t=>{this.errors=t,this.isSubmitting=!1,this.cd.markForCheck()})}updateArticle(t){Object.assign(this.article,t)}static \u0275fac=function(i){return new(i||e)(c(h),c(M),c(v),c(P),c(w))};static \u0275cmp=A({type:e,selectors:[["app-editor-page"]],standalone:!1,decls:20,vars:6,consts:[[1,"editor-page"],[1,"container","page"],[1,"row"],[1,"col-md-10","offset-md-1","col-xs-12"],[3,"errors"],[3,"formGroup"],[3,"disabled"],[1,"form-group"],["formControlName","title","type","text","placeholder","Article Title",1,"form-control","form-control-lg"],["formControlName","description","type","text","placeholder","What's this article about?",1,"form-control"],["formControlName","body","rows","8","placeholder","Write your article (in markdown)",1,"form-control"],["type","text","placeholder","Enter tags",1,"form-control",3,"keyup.enter","formControl"],[1,"tag-list"],["class","tag-default tag-pill",4,"ngFor","ngForOf","ngForTrackBy"],["type","button",1,"btn","btn-lg","pull-xs-right","btn-primary",3,"click"],[1,"tag-default","tag-pill"],[1,"ion-close-round",3,"click"]],template:function(i,r){i&1&&(o(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),d(4,"app-list-errors",4),o(5,"form",5)(6,"fieldset",6)(7,"fieldset",7),d(8,"input",8),n(),o(9,"fieldset",7),d(10,"input",9),n(),o(11,"fieldset",7)(12,"textarea",10),g(13,"              "),n()(),o(14,"fieldset",7)(15,"input",11),f("keyup.enter",function(){return r.addTag()}),n(),o(16,"div",12),N(17,Z,3,1,"span",13),n()(),o(18,"button",14),f("click",function(){return r.submitForm()}),g(19," Publish Article "),n()()()()()()()),i&2&&(a(4),s("errors",r.errors),a(),s("formGroup",r.articleForm),a(),s("disabled",r.isSubmitting),a(9),s("formControl",r.tagField),a(2),s("ngForOf",r.article.tagList)("ngForTrackBy",r.trackByFn))},dependencies:[x,V,D,L,O,G,W,$,q],encapsulation:2,changeDetection:0})}return e})();var H=(()=>{class e{articlesService;router;userService;constructor(t,i,r){this.articlesService=t,this.router=i,this.userService=r}resolve(t,i){return this.articlesService.get(t.params.slug).pipe(b(r=>{if(this.userService.getCurrentUser().username===r.author.username)return r;this.router.navigateByUrl("/")}),E(r=>this.router.navigateByUrl("/")))}static \u0275fac=function(i){return new(i||e)(p(h),p(v),p(B))};static \u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})();var tt=[{path:"",component:S,canActivate:[F]},{path:":slug",component:S,canActivate:[F],resolve:{article:H}}],J=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=u({type:e});static \u0275inj=m({imports:[y.forChild(tt),y]})}return e})();var Et=(()=>{class e{static \u0275fac=function(i){return new(i||e)};static \u0275mod=u({type:e});static \u0275inj=m({imports:[z,J]})}return e})();export{Et as EditorModule};
