{"version":3,"file":"src_app_editor_editor_module_ts.js","mappings":";;;;;;;;;;;;;;;;;;;;AAC+F;AAG/B;AACb;;;;AAEnD,MAGaO,uBAAuB;EAClCC,YACUC,eAAgC,EAChCC,MAAc,EACdC,WAAwB;IAAAC,+LAAA;IAAAA,+LAAA;IAAAA,+LAAA;IAFxB,KAAAH,eAAe,GAAfA,eAAe;IACf,KAAAC,MAAM,GAANA,MAAM;IACN,KAAAC,WAAW,GAAXA,WAAW;EACjB;EAEJE,OAAOA,CACLC,KAA6B,EAC7BC,KAA0B;IAG1B,OAAO,IAAI,CAACN,eAAe,CAACO,GAAG,CAACF,KAAK,CAACG,MAAM,CAAC,MAAM,CAAC,CAAC,CAClDC,IAAI,CACHZ,mDAAG,CACDa,OAAO,IAAG;MACR,IAAI,IAAI,CAACR,WAAW,CAACS,cAAc,EAAE,CAACC,QAAQ,KAAKF,OAAO,CAACG,MAAM,CAACD,QAAQ,EAAE;QAC1E,OAAOF,OAAO;OACf,MAAM;QACL,IAAI,CAACT,MAAM,CAACa,aAAa,CAAC,GAAG,CAAC;;IAElC,CAAC,CACF,EACDlB,0DAAU,CAAEmB,GAAG,IAAK,IAAI,CAACd,MAAM,CAACa,aAAa,CAAC,GAAG,CAAC,CAAC,CACpD;EACL;;gMAzBWhB,uBAAuB;mBAAvBA,uBAAuB,EAAAkB,sDAAA,CAAAE,kDAAA,GAAAF,sDAAA,CAAAG,mDAAA,GAAAH,sDAAA,CAAAE,8CAAA;AAAA;AAAAf,+LAAA,CAAvBL,uBAAuB;SAAvBA,uBAAuB;EAAAsB,OAAA,EAAvBtB,uBAAuB,CAAAuB,IAAA;EAAAC,UAAA,EAFtB;AAAM;;;;;;;;;;;;;;;;;;;;;;ACPmC;AACF;AACyB;AAC1C;;;AAGpC,MAAMI,MAAM,GAAW,CACrB;EACEC,IAAI,EAAE,EAAE;EACRC,SAAS,EAAEJ,8DAAe;EAC1BK,WAAW,EAAE,CAACJ,4CAAS;CACxB,EACD;EACEE,IAAI,EAAE,OAAO;EACbC,SAAS,EAAEJ,8DAAe;EAC1BK,WAAW,EAAE,CAACJ,4CAAS,CAAC;EACxBrB,OAAO,EAAE;IACPM,OAAO,EAAEZ,uFAAuBA;;CAEnC,CACF;AAED,MAIagC,mBAAmB;gMAAnBA,mBAAmB;mBAAnBA,mBAAmB;AAAA;AAAA3B,+LAAA,CAAnB2B,mBAAmB;QAAnBA;AAAmB;AAAA3B,+LAAA,CAAnB2B,mBAAmB;YAHpBP,kEAAqB,CAACG,MAAM,CAAC,EAC7BH,yDAAY;AAAA;AAEQ;;sHAAnBO,mBAAmB;IAAAE,OAAA,GAAAd,yDAAA;IAAAe,OAAA,GAFpBV,yDAAY;EAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;ACzBsE;AACzB;AACZ;AAEN;;;;;;;;;;ICoCnCP,4DAAA,eAC+B;IACFA,wDAAA,mBAAAwB,oDAAA;MAAA,MAAAC,WAAA,GAAAzB,2DAAA,CAAA2B,GAAA;MAAA,MAAAC,MAAA,GAAAH,WAAA,CAAAI,SAAA;MAAA,MAAAC,MAAA,GAAA9B,2DAAA;MAAA,OAASA,yDAAA,CAAA8B,MAAA,CAAAG,SAAA,CAAAL,MAAA,CAAc;IAAA,EAAC;IAAC5B,0DAAA,EAAI;IACxDA,oDAAA,GACF;IAAAA,0DAAA,EAAO;;;;IADLA,uDAAA,GACF;IADEA,gEAAA,MAAA4B,MAAA,MACF;;;ADtChB,MAKapB,eAAe;EAO1BzB,YACUC,eAAgC,EAChCK,KAAqB,EACrBJ,MAAc,EACdqD,EAAe,EACfC,EAAqB;IAAApD,+LAAA;IAAAA,+LAAA;IAAAA,+LAAA;IAAAA,+LAAA;IAAAA,+LAAA;IAAAA,+LAAA,kBAXZ,EAAa;IAAAA,+LAAA;IAAAA,+LAAA,mBAErB,IAAIiC,uDAAW,EAAE;IAAAjC,+LAAA,iBACX,EAAE;IAAAA,+LAAA,uBACJ,KAAK;IAGV,KAAAH,eAAe,GAAfA,eAAe;IACf,KAAAK,KAAK,GAALA,KAAK;IACL,KAAAJ,MAAM,GAANA,MAAM;IACN,KAAAqD,EAAE,GAAFA,EAAE;IACF,KAAAC,EAAE,GAAFA,EAAE;IAEV;IACA,IAAI,CAACC,WAAW,GAAG,IAAI,CAACF,EAAE,CAACG,KAAK,CAAC;MAC/BC,KAAK,EAAE,EAAE;MACTC,WAAW,EAAE,EAAE;MACfC,IAAI,EAAE;KACP,CAAC;IAEF;IACA,IAAI,CAAClD,OAAO,CAACmD,OAAO,GAAG,EAAE;IAEzB;IACA;EACF;;EAEAC,QAAQA,CAAA;IACN;IACA,IAAI,CAACzD,KAAK,CAAC0D,IAAI,CAACC,SAAS,CAAED,IAA0B,IAAI;MACvD,IAAIA,IAAI,CAACrD,OAAO,EAAE;QAChB,IAAI,CAACA,OAAO,GAAGqD,IAAI,CAACrD,OAAO;QAC3B,IAAI,CAAC8C,WAAW,CAACS,UAAU,CAACF,IAAI,CAACrD,OAAO,CAAC;QACzC,IAAI,CAAC6C,EAAE,CAACW,YAAY,EAAE;;IAE1B,CAAC,CAAC;EACJ;EAEAC,SAASA,CAACC,KAAK,EAAEC,IAAI;IACnB,OAAOD,KAAK;EACd;EAEAE,MAAMA,CAAA;IACJ;IACA,MAAMC,GAAG,GAAG,IAAI,CAACC,QAAQ,CAACC,KAAK;IAC/B;IACA,IAAI,IAAI,CAAC/D,OAAO,CAACmD,OAAO,CAACa,OAAO,CAACH,GAAG,CAAC,GAAG,CAAC,EAAE;MACzC,IAAI,CAAC7D,OAAO,CAACmD,OAAO,CAACc,IAAI,CAACJ,GAAG,CAAC;;IAEhC;IACA,IAAI,CAACC,QAAQ,CAACI,KAAK,CAAC,EAAE,CAAC;EACzB;EAEA3B,SAASA,CAAC4B,OAAe;IACvB,IAAI,CAACnE,OAAO,CAACmD,OAAO,GAAG,IAAI,CAACnD,OAAO,CAACmD,OAAO,CAACiB,MAAM,CAACP,GAAG,IAAIA,GAAG,KAAKM,OAAO,CAAC;EAC5E;EAEAE,UAAUA,CAAA;IACR,IAAI,CAACC,YAAY,GAAG,IAAI;IAExB;IACA,IAAI,CAACC,aAAa,CAAC,IAAI,CAACzB,WAAW,CAACiB,KAAK,CAAC;IAE1C;IACA,IAAI,CAACzE,eAAe,CAACkF,IAAI,CAAC,IAAI,CAACxE,OAAO,CAAC,CAACsD,SAAS,CAC/CtD,OAAO,IAAG;MACR,IAAI,CAACT,MAAM,CAACa,aAAa,CAAC,WAAW,GAAGJ,OAAO,CAACyE,IAAI,CAAC;MACrD,IAAI,CAAC5B,EAAE,CAACW,YAAY,EAAE;IACxB,CAAC,EACDnD,GAAG,IAAG;MACJ,IAAI,CAACqE,MAAM,GAAGrE,GAAG;MACjB,IAAI,CAACiE,YAAY,GAAG,KAAK;MACzB,IAAI,CAACzB,EAAE,CAACW,YAAY,EAAE;IACxB,CAAC,CACF;EACH;EAEAe,aAAaA,CAACI,MAAc;IAC1BC,MAAM,CAACC,MAAM,CAAC,IAAI,CAAC7E,OAAO,EAAE2E,MAAM,CAAC;EACrC;;gMAhFW7D,eAAe;mBAAfA,eAAe,EAAAR,+DAAA,CAAAE,kDAAA,GAAAF,+DAAA,CAAAG,2DAAA,GAAAH,+DAAA,CAAAG,mDAAA,GAAAH,+DAAA,CAAAyE,uDAAA,GAAAzE,+DAAA,CAAAA,4DAAA;AAAA;AAAAb,+LAAA,CAAfqB,eAAe;QAAfA,eAAe;EAAAkE,SAAA;EAAAC,KAAA;EAAAC,IAAA;EAAAC,MAAA;EAAAC,QAAA,WAAAC,yBAAAC,EAAA,EAAAC,GAAA;IAAA,IAAAD,EAAA;MCX5BhF,4DAAA,aAAyB;MAKjBA,uDAAA,yBAAqD;MAErDA,4DAAA,cAAgC;MAI1BA,uDAAA,eAGgC;MAClCA,0DAAA,EAAW;MAEXA,4DAAA,kBAA6B;MAC3BA,uDAAA,gBAG6C;MAC/CA,0DAAA,EAAW;MAEXA,4DAAA,mBAA6B;MAK3BA,oDAAA;MAAAA,0DAAA,EAAW;MAGbA,4DAAA,mBAA6B;MAKzBA,wDAAA,yBAAAmF,uDAAA;QAAA,OAAeF,GAAA,CAAA3B,MAAA,EAAQ;MAAA,EAAC;MAJ1BtD,0DAAA,EAI6B;MAE7BA,4DAAA,eAAsB;MACpBA,wDAAA,KAAAqF,gCAAA,mBAIO;MACTrF,0DAAA,EAAM;MAGRA,4DAAA,kBAA0F;MAAvBA,wDAAA,mBAAAsF,kDAAA;QAAA,OAASL,GAAA,CAAAlB,UAAA,EAAY;MAAA,EAAC;MACvF/D,oDAAA,yBACF;MAAAA,0DAAA,EAAS;;;MA7CIA,uDAAA,GAAiB;MAAjBA,wDAAA,WAAAiF,GAAA,CAAAb,MAAA,CAAiB;MAE5BpE,uDAAA,GAAyB;MAAzBA,wDAAA,cAAAiF,GAAA,CAAAzC,WAAA,CAAyB;MACnBxC,uDAAA,GAAyB;MAAzBA,wDAAA,aAAAiF,GAAA,CAAAjB,YAAA,CAAyB;MA4B7BhE,uDAAA,GAAwB;MAAxBA,wDAAA,gBAAAiF,GAAA,CAAAzB,QAAA,CAAwB;MAIFxD,uDAAA,GAAoB;MAApBA,wDAAA,YAAAiF,GAAA,CAAAvF,OAAA,CAAAmD,OAAA,CAAoB,iBAAAoC,GAAA,CAAA9B,SAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrCL;AAEZ;AACqB;;AAE9D,MAKasC,YAAY;gMAAZA,YAAY;mBAAZA,YAAY;AAAA;AAAAtG,+LAAA,CAAZsG,YAAY;QAAZA;AAAY;AAAAtG,+LAAA,CAAZsG,YAAY;YAJbD,iDAAY,EAAE1E,uEAAmB;AAAA;AAIpB;;sHAAZ2E,YAAY;IAAAC,YAAA,GAHRlF,8DAAe;IAAAQ,OAAA,GADpBwE,iDAAY,EAAE1E,uEAAmB;EAAA;AAAA","sources":["./src/app/editor/editable-article-resolver.service.ts","./src/app/editor/editor-routing.module.ts","./src/app/editor/editor.component.ts","./src/app/editor/editor.component.html","./src/app/editor/editor.module.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { ActivatedRouteSnapshot, Resolve, Router, RouterStateSnapshot } from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\n\r\nimport { Article, ArticlesService, UserService } from '../core';\r\nimport { catchError ,  map } from 'rxjs/operators';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class EditableArticleResolver implements Resolve<Article> {\r\n  constructor(\r\n    private articlesService: ArticlesService,\r\n    private router: Router,\r\n    private userService: UserService\r\n  ) { }\r\n\r\n  resolve(\r\n    route: ActivatedRouteSnapshot,\r\n    state: RouterStateSnapshot\r\n  ): Observable<any> {\r\n\r\n    return this.articlesService.get(route.params['slug'])\r\n      .pipe(\r\n        map(\r\n          article => {\r\n            if (this.userService.getCurrentUser().username === article.author.username) {\r\n              return article;\r\n            } else {\r\n              this.router.navigateByUrl('/');\r\n            }\r\n          }\r\n        ),\r\n        catchError((err) => this.router.navigateByUrl('/'))\r\n      );\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { EditorComponent } from './editor.component';\r\nimport { EditableArticleResolver } from './editable-article-resolver.service';\r\nimport { AuthGuard } from '../core';\r\nimport { SharedModule } from '../shared';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: EditorComponent,\r\n    canActivate: [AuthGuard]\r\n  },\r\n  {\r\n    path: ':slug',\r\n    component: EditorComponent,\r\n    canActivate: [AuthGuard],\r\n    resolve: {\r\n      article: EditableArticleResolver\r\n    }\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class EditorRoutingModule {}\r\n","import { Component, OnInit, ChangeDetectionStrategy, ChangeDetectorRef } from '@angular/core';\r\nimport { FormBuilder, FormGroup, FormControl } from '@angular/forms';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\n\r\nimport { Article, ArticlesService } from '../core';\r\n\r\n@Component({\r\n  selector: 'app-editor-page',\r\n  templateUrl: './editor.component.html',\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class EditorComponent implements OnInit {\r\n  article: Article = {} as Article;\r\n  articleForm: FormGroup;\r\n  tagField = new FormControl();\r\n  errors: Object = {};\r\n  isSubmitting = false;\r\n\r\n  constructor(\r\n    private articlesService: ArticlesService,\r\n    private route: ActivatedRoute,\r\n    private router: Router,\r\n    private fb: FormBuilder,\r\n    private cd: ChangeDetectorRef\r\n  ) {\r\n    // use the FormBuilder to create a form group\r\n    this.articleForm = this.fb.group({\r\n      title: '',\r\n      description: '',\r\n      body: ''\r\n    });\r\n\r\n    // Initialized tagList as empty array\r\n    this.article.tagList = [];\r\n\r\n    // Optional: subscribe to value changes on the form\r\n    // this.articleForm.valueChanges.subscribe(value => this.updateArticle(value));\r\n  }\r\n\r\n  ngOnInit() {\r\n    // If there's an article prefetched, load it\r\n    this.route.data.subscribe((data: { article: Article }) => {\r\n      if (data.article) {\r\n        this.article = data.article;\r\n        this.articleForm.patchValue(data.article);\r\n        this.cd.markForCheck();\r\n      }\r\n    });\r\n  }\r\n\r\n  trackByFn(index, item) {\r\n    return index;\r\n  }\r\n\r\n  addTag() {\r\n    // retrieve tag control\r\n    const tag = this.tagField.value;\r\n    // only add tag if it does not exist yet\r\n    if (this.article.tagList.indexOf(tag) < 0) {\r\n      this.article.tagList.push(tag);\r\n    }\r\n    // clear the input\r\n    this.tagField.reset('');\r\n  }\r\n\r\n  removeTag(tagName: string) {\r\n    this.article.tagList = this.article.tagList.filter(tag => tag !== tagName);\r\n  }\r\n\r\n  submitForm() {\r\n    this.isSubmitting = true;\r\n\r\n    // update the model\r\n    this.updateArticle(this.articleForm.value);\r\n\r\n    // post the changes\r\n    this.articlesService.save(this.article).subscribe(\r\n      article => {\r\n        this.router.navigateByUrl('/article/' + article.slug);\r\n        this.cd.markForCheck();\r\n      },\r\n      err => {\r\n        this.errors = err;\r\n        this.isSubmitting = false;\r\n        this.cd.markForCheck();\r\n      }\r\n    );\r\n  }\r\n\r\n  updateArticle(values: Object) {\r\n    Object.assign(this.article, values);\r\n  }\r\n}\r\n","<div class=\"editor-page\">\r\n  <div class=\"container page\">\r\n    <div class=\"row\">\r\n      <div class=\"col-md-10 offset-md-1 col-xs-12\">\r\n\r\n        <app-list-errors [errors]=\"errors\"></app-list-errors>\r\n\r\n        <form [formGroup]=\"articleForm\">\r\n          <fieldset [disabled]=\"isSubmitting\">\r\n\r\n            <fieldset class=\"form-group\">\r\n              <input class=\"form-control form-control-lg\"\r\n                formControlName=\"title\"\r\n                type=\"text\"\r\n                placeholder=\"Article Title\" />\r\n            </fieldset>\r\n\r\n            <fieldset class=\"form-group\">\r\n              <input class=\"form-control\"\r\n                formControlName=\"description\"\r\n                type=\"text\"\r\n                placeholder=\"What's this article about?\" />\r\n            </fieldset>\r\n\r\n            <fieldset class=\"form-group\">\r\n              <textarea class=\"form-control\"\r\n                formControlName=\"body\"\r\n                rows=\"8\"\r\n                placeholder=\"Write your article (in markdown)\">\r\n              </textarea>\r\n            </fieldset>\r\n\r\n            <fieldset class=\"form-group\">\r\n              <input class=\"form-control\"\r\n                type=\"text\"\r\n                placeholder=\"Enter tags\"\r\n                [formControl]=\"tagField\"\r\n                (keyup.enter)=\"addTag()\" />\r\n\r\n              <div class=\"tag-list\">\r\n                <span *ngFor=\"let tag of article.tagList; trackBy: trackByFn\"\r\n                  class=\"tag-default tag-pill\">\r\n                  <i class=\"ion-close-round\" (click)=\"removeTag(tag)\"></i>\r\n                  {{ tag }}\r\n                </span>\r\n              </div>\r\n            </fieldset>\r\n\r\n            <button class=\"btn btn-lg pull-xs-right btn-primary\" type=\"button\" (click)=\"submitForm()\">\r\n              Publish Article\r\n            </button>\r\n\r\n          </fieldset>\r\n        </form>\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { NgModule } from '@angular/core';\r\n\r\n\r\nimport { EditorComponent } from './editor.component';\r\n\r\nimport { SharedModule } from '../shared';\r\nimport { EditorRoutingModule } from './editor-routing.module';\r\n\r\n@NgModule({\r\n  imports: [SharedModule, EditorRoutingModule],\r\n  declarations: [EditorComponent],\r\n  providers: []\r\n})\r\nexport class EditorModule {}\r\n"],"names":["ActivatedRouteSnapshot","Router","RouterStateSnapshot","ArticlesService","UserService","catchError","map","EditableArticleResolver","constructor","articlesService","router","userService","_defineProperty","resolve","route","state","get","params","pipe","article","getCurrentUser","username","author","navigateByUrl","err","i0","ɵɵinject","i1","i2","factory","ɵfac","providedIn","RouterModule","EditorComponent","AuthGuard","routes","path","component","canActivate","EditorRoutingModule","forChild","imports","exports","ChangeDetectorRef","FormBuilder","FormControl","ActivatedRoute","ɵɵelementStart","ɵɵlistener","EditorComponent_span_17_Template_i_click_1_listener","restoredCtx","ɵɵrestoreView","_r3","tag_r1","$implicit","ctx_r2","ɵɵnextContext","ɵɵresetView","removeTag","ɵɵelementEnd","ɵɵtext","ɵɵadvance","ɵɵtextInterpolate1","fb","cd","articleForm","group","title","description","body","tagList","ngOnInit","data","subscribe","patchValue","markForCheck","trackByFn","index","item","addTag","tag","tagField","value","indexOf","push","reset","tagName","filter","submitForm","isSubmitting","updateArticle","save","slug","errors","values","Object","assign","ɵɵdirectiveInject","i3","selectors","decls","vars","consts","template","EditorComponent_Template","rf","ctx","ɵɵelement","EditorComponent_Template_input_keyup_enter_15_listener","ɵɵtemplate","EditorComponent_span_17_Template","EditorComponent_Template_button_click_18_listener","ɵɵproperty","SharedModule","EditorModule","declarations"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}